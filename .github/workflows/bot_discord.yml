name: Discord Notification

on:
  push:
    paths:
      - 'be/**'
  pull_request:
    paths:
      - 'be/**'
    types: [opened, synchronize, reopened, closed, merged]
  pull_request_target:
    paths:
      - 'be/**'
  merge_group:
    paths:
      - 'be/**'
  workflow_dispatch:

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord notification
        uses: appleboy/discord-action@master
        with:
          webhook_url: ${{ secrets.DISCORD_WEBHOOK }}
          message: |
            **ðŸ“Š WEAVE - Backend Deployment Status**
            
            **Event:** ${{ github.event_name }}
            **Branch:** `${{ github.ref_name }}`
            **Commit:** ${{ github.sha }}
            **Author:** ${{ github.actor }}
            **Repository:** ${{ github.repository }}
            **Timestamp:** ${{ github.event.head_commit.timestamp }}
            
            **Commit Message:** ${{ github.event.head_commit.message }}
